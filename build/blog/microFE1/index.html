<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/metaTrip/build/blog/rss.xml" title="MetaTrip RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/metaTrip/build/blog/atom.xml" title="MetaTrip Atom Feed"><title data-react-helmet="true">Micro FrontEnd Basic | MetaTrip</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content=" https://777sunny777.github.io/metaTrip//metaTrip/build/blog/microFE1"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Micro FrontEnd Basic | MetaTrip"><meta data-react-helmet="true" name="description" content="- è¿™æ˜¯æˆ‘å¯¹äºMFEæ¯”è¾ƒç³»ç»Ÿå­¦ä¹ è®°å½•çš„é¦–ç¯‡blog"><meta data-react-helmet="true" property="og:description" content="- è¿™æ˜¯æˆ‘å¯¹äºMFEæ¯”è¾ƒç³»ç»Ÿå­¦ä¹ è®°å½•çš„é¦–ç¯‡blog"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-01-26T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://github.com/777sunny777"><meta data-react-helmet="true" property="article:tag" content="micro,react,javaScript"><link data-react-helmet="true" rel="icon" href="/metaTrip/build/img/metaIcon.png"><link data-react-helmet="true" rel="canonical" href="https://777sunny777.github.io/metaTrip//metaTrip/build/blog/microFE1"><link data-react-helmet="true" rel="alternate" href="https://777sunny777.github.io/metaTrip//metaTrip/build/blog/microFE1" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://777sunny777.github.io/metaTrip//metaTrip/build/blog/microFE1" hreflang="x-default"><link rel="stylesheet" href="/metaTrip/build/assets/css/styles.311e2bb1.css">
<link rel="preload" href="/metaTrip/build/assets/js/runtime~main.1a16aeb3.js" as="script">
<link rel="preload" href="/metaTrip/build/assets/js/main.e52117e5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/metaTrip/build/"><div class="navbar__logo"><img src="/metaTrip/build/img/metaIcon.png" alt="meta Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/metaTrip/build/img/metaIcon.png" alt="meta Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">MetaTrip</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/metaTrip/build/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/777sunny777/metaTrip" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">MetaTrip with Sheldon</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/react2">useMemo and useCallback, you really know it?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/media">æˆ‘åšè‡ªåª’ä½“å°è§†é¢‘çš„ä¸€ç‚¹æ„Ÿè§¦</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/funding-basic5">å¦‚ä½•æŒ‘é€‰é€‚åˆæŠ•èµ„çš„æŒ‡æ•°åŸºé‡‘</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/react1">useEffectï¼Œyou really know it?</a></li><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/metaTrip/build/blog/microFE1">Micro FrontEnd Basic</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/funding-basic4">å¸¸è§è¡Œä¸šæŒ‡æ•°åŸºé‡‘</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/funding-basic3">å¸¸è§å®½åŸºæŒ‡æ•°åŸºé‡‘(äºŒ)</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/funding-basic2">å¸¸è§å®½åŸºæŒ‡æ•°åŸºé‡‘(ä¸€)</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/storybook-usage2">How to use Storybook 2</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/funding-basic1">èµ„äº§ä¸æŒ‡æ•°</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/metaTrip/build/blog/storybook-usage1">How to use Storybook 1</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Micro FrontEnd Basic</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2022-01-26T00:00:00.000Z" itemprop="datePublished">January 26, 2022</time> Â· <!-- -->15 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a href="https://github.com/777sunny777" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img class="image_9q7L" src="https://github.com/777sunny777.png" alt="Sheldon Y Sun"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/777sunny777" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sheldon Y Sun</span></a></div><small class="avatar__subtitle" itemprop="description">Jser @ Open Source Community</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><ul><li>è¿™æ˜¯æˆ‘å¯¹äºMFEæ¯”è¾ƒç³»ç»Ÿå­¦ä¹ è®°å½•çš„é¦–ç¯‡blog </li><li>ä¸»è¦å‚è€ƒçš„Cam Jacksonçš„æ–‡ç« <a href="https://martinfowler.com/articles/micro-frontends.html" target="_blank" rel="noopener noreferrer">Micro Frontends</a></li></ul></div></div><p>Cam Jackson æ˜¯Thoughtworksçš„å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œè¿™ç¯‡æ–‡ç« è™½ç„¶å‡ºè‡ª2019å¹´ï¼Œä½†æ˜¯å¯¹äºMFEæ¦‚å¿µçš„åˆå­¦è€…è¿˜æ˜¯å‹å¥½çš„ï¼Œå¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„ç†è§£ã€‚
ç›¸åº”çš„æ–‡ç« æœ€åè¿˜æä¾›äº†MEFçš„example, æŒ‰ç…§æ–‡ç« é¡ºåºå»å­¦ä¹ ï¼Œåº”è¯¥å¯ä»¥å¾ˆå¿«å…¥é—¨ã€‚æˆ‘çš„è¿™ç¯‡blogï¼Œç®—æ˜¯å¯¹ä»–çš„æ–‡ç« å’Œæˆ‘ä¸€ç‚¹ç»éªŒçš„æ€»ç»“ï¼Œ
æˆ‘ä»¬ç›´æ¥æ­¥å…¥æ­£é¢˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="1-micro-frontends">1. Micro Frontends<a class="hash-link" href="#1-micro-frontends" title="Direct link to heading">â€‹</a></h2><p>&quot;An architectural style where independently deliverable frontend applications are composed into a greater whole&quot;</p><p>è¿™æ˜¯Cam Jackson æˆ–è€…è¯´æ˜¯Thoughtworkså¯¹MFEçš„å®šä¹‰ã€‚æˆ‘ä»¬ä»ä¸­å¯ä»¥æå–åˆ°ä¸¤ä¸ªé‡ç‚¹ï¼š</p><ul><li>independently deliverable. ç‹¬ç«‹äº¤ä»˜</li><li>composed into a greater whole. ç»„åˆæ„æˆæ•´ä½“</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1-1-mfe-cost">1-1. MFE cost<a class="hash-link" href="#1-1-mfe-cost" title="Direct link to heading">â€‹</a></h3><p>å› ä¸ºåé¢æˆ‘ä»¬è¦è¯¦ç»†è§£è¯»ä¸‹MFEçš„Benefitsï¼Œæ‰€ä»¥è¿™é‡Œä¸»è¦æ˜¯å…ˆå°†ä¸€ä¸‹ä»–çš„costï¼š</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>there are no free lunches when it comes to software architecture - everything comes with a cost.</p><ul><li>Some micro frontend implementations can lead to duplication of dependencies</li><li>increasing the number of bytes our users must download</li><li>the dramatic increase in team autonomy can cause fragmentation in the way your teams work</li></ul><p>Nonetheless, we believe that these risks can be managed, and that the benefits of micro frontends often outweigh the costs</p></div></div><p>æ€»ä½“æ¥è¯´ï¼ŒMFEå¯èƒ½ä¼šå¯¼è‡´ä¾èµ–é‡å¤ï¼Œå¢åŠ äº†éœ€è¦downloadçš„assetï¼Œè¿˜æœ‰å°±æ˜¯ç‹¬ç«‹å›¢é˜Ÿå·¥ä½œæ–¹å¼ä¸Šçš„ä¸€äº›æŒ‘æˆ˜ã€‚å¯¹äºç»“è®ºThoughtworksè®¤ä¸ºæ€»ä½“ä¸ŠMFEè¿˜æ˜¯åˆ©å¤§äºå¼Šçš„ã€‚
æˆ‘ä»¬æ¥ä¸‹æ¥è¯´è¯´Benefitsã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="2-benefits">2. Benefits<a class="hash-link" href="#2-benefits" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-1-incremental-upgradeså¢é‡å‡çº§">2-1. Incremental upgrades(å¢é‡å‡çº§)<a class="hash-link" href="#2-1-incremental-upgradeså¢é‡å‡çº§" title="Direct link to heading">â€‹</a></h3><p>The endgame here is that we&#x27;re afforded more freedom to make case-by-case decisions on individual parts of our product,
and to make incremental upgrades to our architecture, our dependencies, and our user experience.
If there is a major breaking change in our main framework, each micro frontend can be upgraded whenever it makes sense,
rather than being forced to stop the world and upgrade everything at once. If we want to experiment with new technology,
or new modes of interaction, we can do it in a more isolated fashion than we could before.</p><p>å¥½å¤„ä¹‹ä¸€å°±æ˜¯MFEçš„å­æ¨¡å—å‡çº§æ˜¯è‡ªä¸»çš„ï¼Œå¹¶ä¸”ä¸ä¸»æ¨¡å—è§£è€¦ï¼Œå³ä¸»æ¨¡å—æœ‰è¿‡æœ‰äº›å¤§çš„major breaking changesï¼Œå­æ¨¡å—ä¹Ÿä¸éœ€è¦å’Œä¸»æ¨¡å—åŒæ­¥è¿›è¡Œä¿®æ”¹å’Œå‡çº§ã€‚
è€Œæ˜¯å¯ä»¥é€‰æ‹©ä¸€ä¸ªè‡ªèº«åˆé€‚çš„æ—¶æœºæ¥è¿›è¡Œå‡çº§ã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>è¿™é‡Œé¢æˆ‘çš„ç†è§£æ˜¯ï¼šä¸»æ¨¡å—çš„ä»¥æ¥è¿˜æ˜¯ä¼šdefaultå½±å“MFEçš„å­æ¨¡å—çš„ï¼Œä½†æ˜¯å­æ¨¡å—è‡ªèº«å¯ä»¥é€‰æ‹©è¦ä¸è¦è¿™ç§å½±å“ï¼Œå³ä¾èµ–ä¸»æ¨¡å—çš„ä¾èµ–ï¼Œ
æˆ–è€…å…³é—­ä¸»æ¨¡å—ä¾èµ–è€Œåªé€‰æ‹©è‡ªèº«çš„ä¾èµ–ï¼Œè¿™æ ·å°±æ¯”è¾ƒçµæ´»å’Œè‡ªä¸»äº†ã€‚è¿™æ¡æˆ‘ä¼šåœ¨åé¢è¿›è¡Œç›¸åº”çš„å°è¯ã€‚</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-2-simple-decoupled-codebasesç®€å•è§£è€¦">2-2. Simple, decoupled codebases(ç®€å•ï¼Œè§£è€¦)<a class="hash-link" href="#2-2-simple-decoupled-codebasesç®€å•è§£è€¦" title="Direct link to heading">â€‹</a></h3><p>These smaller codebases tend to be simpler and easier for developers to work with.
In particular, we avoid the complexity arising from unintentional and inappropriate coupling between components
that should not know about each other. </p><p>micro frontends push you to be explicit and deliberate about how data and events flow
between different parts of the application, which is something that we should have been doing anyway!</p><p>MFEä¸€å®šæ˜¯å°è€Œç²¾çš„ï¼Œå°½é‡å‡å°‘ç»„ä»¶é—´æ•°æ®æˆ–äº‹ä»¶ä¼ è¾“ï¼Œè¿™ä¸€ç‚¹éœ€è¦æˆ‘ä»¬æ·±å…¥çš„æ€è€ƒã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-3-independent-deploymentç‹¬ç«‹éƒ¨ç½²">2-3. Independent deployment(ç‹¬ç«‹éƒ¨ç½²)<a class="hash-link" href="#2-3-independent-deploymentç‹¬ç«‹éƒ¨ç½²" title="Direct link to heading">â€‹</a></h3><p>Just as with microservices, independent deployability of micro frontends is key.
This reduces the scope of any given deployment, which in turn reduces the associated risk.
Regardless of how or where your frontend code is hosted, each micro frontend should have
its own continuous delivery pipeline, which builds, tests and deploys it all the way to production.
We should be able to deploy each micro frontend with very little thought given to the current state of
other codebases or pipelines. It shouldn&#x27;t matter if the old monolith is on a fixed, manual,
quarterly release cycle, or if the team next door has pushed a half-finished or broken feature into their master branch.
If a given micro frontend is ready to go to production, it should be able to do so, and that decision
should be up to the team who build and maintain it.</p><p>MFEæ˜¯éœ€è¦å¯¹ç«‹è¿›è¡Œbuildï¼Œtestå’Œdeployåˆ°productionçš„ï¼Œè¿™ä¸ªä¹Ÿæ˜¯å…¶ä¸»è¦ç‰¹å¾ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä¸€èˆ¬é¡¹ç›®è¿›è¡ŒMFEæ¶æ„é‡æ„çš„ä¸»è¦ç›®çš„ã€‚</p><img src="/metaTrip/build/img/blog/deployment.png" alt="" style="width:100%"><h3 class="anchor anchorWithStickyNavbar_y2LR" id="2-4-autonomous-teamsè‡ªæ²»å›¢é˜Ÿ">2-4. Autonomous teams(è‡ªæ²»å›¢é˜Ÿ)<a class="hash-link" href="#2-4-autonomous-teamsè‡ªæ²»å›¢é˜Ÿ" title="Direct link to heading">â€‹</a></h3><p>Teams can have full ownership of everything they need to deliver value to customers,
which enables them to move quickly and effectively</p><p>ä¾èµ–è¶Šå°‘ï¼Œå“åº”è¶Šçµæ´»ã€‚è¿™ä¸ªå’Œç¬¬ä¸‰æ¡æ¯”è¾ƒç›¸è¾…ç›¸æˆã€‚</p><img src="/metaTrip/build/img/blog/horizontal.png" alt="" style="width:100%"><h2 class="anchor anchorWithStickyNavbar_y2LR" id="3-integration-approaches">3. Integration approaches<a class="hash-link" href="#3-integration-approaches" title="Direct link to heading">â€‹</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p> there is a micro frontend for each page in the application, and there is a single container application, which:</p><ul><li>renders common page elements such as headers and footers</li><li>addresses cross-cutting concerns like authentication and navigation</li><li>brings the various micro frontends together onto the page, and tells each micro frontend when and where to render itself</li></ul></div></div><img src="/metaTrip/build/img/blog/composition.png" alt="" style="width:100%"><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-1-server-side-template-composition">3-1. Server-side template composition<a class="hash-link" href="#3-1-server-side-template-composition" title="Direct link to heading">â€‹</a></h3><p>rendering HTML on the server out of multiple templates or fragments.
We have an index.html which contains any common page elements,
and then uses server-side includes to plug in page-specific content from fragment HTML files</p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">en</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">dir</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">ltr</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">utf-8</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Feed me</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ğŸ½ Feed me</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    &lt;!--# include file=&quot;$PAGE.html&quot; --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">server </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    listen </span><span class="token number" style="color:#36acaa">8080</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server_name localhost</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">usr</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">share</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">nginx</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">html</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index index</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">html</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssi on</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Redirect </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> to </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">browse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    rewrite </span><span class="token operator" style="color:#393A34">^</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">$ http</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">localhost</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">browse redirect</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Decide which </span><span class="token constant" style="color:#36acaa">HTML</span><span class="token plain"> fragment to insert based on the </span><span class="token constant" style="color:#36acaa">URL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">browse </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> $</span><span class="token constant" style="color:#36acaa">PAGE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;browse&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">order </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> $</span><span class="token constant" style="color:#36acaa">PAGE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;order&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    location </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">profile </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> $</span><span class="token constant" style="color:#36acaa">PAGE</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;profile&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # All locations should render through index</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error_page </span><span class="token number" style="color:#36acaa">404</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">html</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This example shows how micro frontends is not necessarily a new technique,
and does not have to be complicated.
As long as we&#x27;re careful about how our design decisions affect the autonomy of our codebases and our teams, we can achieve many of the same benefits regardless of our tech stack.</p><p>å®é™…ä¸Šè¿™ä¸ªä¾‹å­åªæ˜¯è¦å‘Šè¯‰æˆ‘ä»¬ï¼ŒMFEæ˜¯ä¸€ç§æ€æƒ³ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æŠ€æœ¯ï¼Œæˆ–è€…éœ€è¦æ–°çš„æŠ€æœ¯æ‰å¯ä»¥å®ç°ã€‚
åªè¦æ»¡è¶³ç‹¬ç«‹äº¤ä»˜ï¼Œç»„åˆæ„æˆæ•´ä½“éƒ½åº”è¯¥æ˜¯MFEçš„èŒƒç•´ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-2-build-time-integration">3-2. Build-time integration<a class="hash-link" href="#3-2-build-time-integration" title="Direct link to heading">â€‹</a></h3><p>One approach that we sometimes see is to publish each micro frontend as a package,
and have the container application include them all as library dependencies.
Here is how the container&#x27;s package.json might look for our example app:</p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@feed-me/container&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1.0.0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;A food delivery web app&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">&quot;dependencies&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;@feed-me/browse-restaurants&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^1.2.3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;@feed-me/order-food&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^4.5.6&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;@feed-me/user-profile&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;^7.8.9&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>component ui library æ¡†æ¶å°±æ˜¯ä¸€ç§build-timeçš„æ¨¡å¼ã€‚ä»–çš„å¼•ç”¨æ˜¯åŸºäºpackageçš„ï¼Œä¾èµ–çš„å½¢å¼å­˜åœ¨ã€‚
å¾ˆå¤šå¤§çš„é¡¹ç›®ä¹Ÿæ˜¯è¿™ç§å‡çš„MFEå¼€å‘æ–¹å¼ã€‚</p><p>At first this seems to make sense. It produces a single deployable Javascript bundle,
as is usual, allowing us to de-duplicate common dependencies from our various applications.
However, this approach means that we have to re-compile and release every single micro frontend
in order to release a change to any individual part of the product. Just as with microservices,
we&#x27;ve seen enough pain caused by such a lockstep release process that we would recommend
strongly against this kind of approach to micro frontends.</p><p>è¿™ç§æ–¹å¼çš„ä¸åˆç†ä¹‹å¤„å°±åœ¨äºcompileå’Œreleaseéƒ½éœ€è¦åŒæ­¥è¿›è¡Œï¼Œè¿™ä¸ªå’ŒMFEç‹¬ç«‹äº¤ä»˜çš„æ¦‚å¿µæ˜¯ç»å¯¹ç›¸åçš„ï¼Œæ˜¯åMFEçš„ä¸€ç§æ–¹å¼ã€‚
We should find a way to integrate our micro frontends at run-time, rather than at build-time.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-3-run-time-integration-via-iframes">3-3. Run-time integration via iframes<a class="hash-link" href="#3-3-run-time-integration-via-iframes" title="Direct link to heading">â€‹</a></h3><p>One of the simplest approaches to composing applications together in the browser is the humble iframe.
By their nature, iframes make it easy to build a page out of independent sub-pages.
They also offer a good degree of isolation in terms of styling and global variables not interfering with each other.</p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Feed me!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Welcome to Feed me!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">iframe</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">micro-frontend-container</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">iframe</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text/javascript</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      const microFrontendsByRoute = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        &#x27;/&#x27;: &#x27;https://browse.example.com/index.html&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        &#x27;/order-food&#x27;: &#x27;https://order.example.com/index.html&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        &#x27;/user-profile&#x27;: &#x27;https://profile.example.com/index.html&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      const iframe = document.getElementById(&#x27;micro-frontend-container&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      iframe.src = microFrontendsByRoute[window.location.pathname];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>It can be difficult to build integrations between different parts of the application,
so they make routing, history, and deep-linking more complicated,
and they present some extra challenges to making your page fully responsive.</p><p>iframesè§‰å¾—æ˜¯MFEæœ€ç®€å•çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬ä¸»è¦è€ƒè™‘åˆ°çµæ´»æ€§çš„ä¸€äº›é—®é¢˜è€Œä¸å»é‡‡ç”¨å®ƒã€‚æ¯”å¦‚responsiveçš„å®ç°å°±å¾ˆå›°éš¾ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-4-run-time-integration-via-javascriptä¸»è¦å®ç°æ–¹å¼">3-4. Run-time integration via JavaScript(ä¸»è¦å®ç°æ–¹å¼)<a class="hash-link" href="#3-4-run-time-integration-via-javascriptä¸»è¦å®ç°æ–¹å¼" title="Direct link to heading">â€‹</a></h3><p>probably the most flexible one, and the one that we see teams adopting most frequently.
Each micro frontend is included onto the page using a <strong>script</strong> tag, and upon load exposes a global function as its entry-point.
The container application then determines which micro frontend should be mounted,
and calls the relevant function to tell a micro frontend when and where to render itself.</p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Feed me!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Welcome to Feed me!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    &lt;!-- These scripts don&#x27;t render anything immediately --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    &lt;!-- Instead they attach entry-point functions to `window` --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://browse.example.com/bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://order.example.com/bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://profile.example.com/bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">micro-frontend-root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text/javascript</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      // These global functions are attached to window by the above scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      const microFrontendsByRoute = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        &#x27;/&#x27;: window.renderBrowseRestaurants,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        &#x27;/order-food&#x27;: window.renderOrderFood,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        &#x27;/user-profile&#x27;: window.renderUserProfile,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      const renderFunction = microFrontendsByRoute[window.location.pathname];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      // Having determined the entry-point function, we now call it,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      // giving it the ID of the element where it should render itself</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      renderFunction(&#x27;micro-frontend-root&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The above is obviously a primitive example, but it demonstrates the basic technique.
Unlike with build-time integration, we can deploy each of the bundle.js files independently.
And unlike with iframes, we have full flexibility to build integrations between our micro frontends however we like.
We could extend the above code in many ways, for example to only download each JavaScript bundle as needed,
or to pass data in and out when rendering a micro frontend.The flexibility of this approach, combined with the independent
deployability, makes it our default choice, and the one that we&#x27;ve seen in the wild most often.</p><p>è¿™ç§æ–¹å¼ä¸iframeç›¸æ¯”ï¼Œå¯ä»¥è§£å†³å­æ¨¡å—é—´çš„åŒæ­¥åä½œé—®é¢˜ï¼Œæ¯”å¦‚responsiveã€‚ä¸build-timeç›¸æ¯”ï¼Œå¯ä»¥ç‹¬ç«‹äº¤ä»˜ã€‚è€Œä¸”è¿˜å¯ä»¥æŒ‰éœ€åŠ è½½ã€‚
æ‰€ä»¥æˆä¸ºäº†MFEå®ç°çš„æœ€ä¸»è¦æ–¹å¼ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="3-5-run-time-integration-via-web-components">3-5. Run-time integration via Web Components<a class="hash-link" href="#3-5-run-time-integration-via-web-components" title="Direct link to heading">â€‹</a></h3><p> for each micro frontend to define an HTML custom element for the container to instantiate,
instead of defining a global function for the container to call.</p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Feed me!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Welcome to Feed me!</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   &lt;!-- These scripts don&#x27;t render anything immediately --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   &lt;!-- Instead they each define a custom element type --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://browse.example.com/bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://order.example.com/bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://profile.example.com/bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">micro-frontend-root</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text/javascript</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     // These element types are defined by the above scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     const webComponentsByRoute = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">       &#x27;/&#x27;: &#x27;micro-frontend-browse-restaurants&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">       &#x27;/order-food&#x27;: &#x27;micro-frontend-order-food&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">       &#x27;/user-profile&#x27;: &#x27;micro-frontend-user-profile&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     const webComponentType = webComponentsByRoute[window.location.pathname];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     // Having determined the right web component custom element type,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     // we now create an instance of it and attach it to the document</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     const root = document.getElementById(&#x27;micro-frontend-root&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     const webComponent = document.createElement(webComponentType);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">     root.appendChild(webComponent);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">   </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"> </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>the main difference being that you are opting in to doing things &#x27;the web component way&#x27;.
If you like the web component spec, and you like the idea of using capabilities that the browser provides,
then this is a good option. If you prefer to define your own interface between the container
application and micro frontends, then you might prefer the previous example instead.</p><p>å¦‚æœä¸éœ€è¦è€ƒè™‘IEæµè§ˆå™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="4-styling">4. Styling<a class="hash-link" href="#4-styling" title="Direct link to heading">â€‹</a></h2><p>In a micro frontends landscape, many of these problems are exacerbated. For example,
if one team&#x27;s micro frontend has a stylesheet that says h2 { color: black; },
and another one says h2 { color: blue; }, and both these selectors are attached to the same page,
then someone is going to be disappointed! This is not a new problem,
but it&#x27;s made worse by the fact that these selectors were written by different teams at different times,
and the code is probably split across separate repositories, making it more difficult to discover.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>MFEä¸»è¦æ˜¯è§£å†³cssçš„æ ·å¼é‡åé—®é¢˜ï¼Œç›®å‰çš„cssæœ‰å¤šç§å†™æ³•æ¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œ BEMï¼Œsass/less, css in js.
æˆ‘ç›®å‰å¯¹è¿™ä¸ªå…·ä½“çš„è§£å†³æ–¹å¼è¿˜æœ‰å¾…ç†è§£ï¼Œåé¢æˆ‘ä¼šå»å°è¯ä¸€ä¸‹ã€‚</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="5-shared-component-libraries">5. Shared component libraries<a class="hash-link" href="#5-shared-component-libraries" title="Direct link to heading">â€‹</a></h2><p>We mentioned above that visual consistency across micro frontends is important,
and one approach to this is to develop a library of shared, re-usable UI components.
In general we believe that this a good idea, although it is difficult to do well.
The main benefits of creating such a library are reduced effort through re-use of code,
and visual consistency. In addition, your component library can serve as a living styleguide,
and it can be a great point of collaboration between developers and designers.</p><p>ç®€å•æ¥è¯´ï¼ŒMFEä¹Ÿæ˜¯éœ€è¦åŒæ„è§†è§‰UI æ ‡å‡†çš„ï¼Œè¿™è¶‹åŠ¿å°±éœ€è¦ä¸€ä¸ªcomponent ui åº“æ¥æ”¯æŒã€‚æ¯”å¦‚muiï¼Œbootstrapã€‚
æˆ–è€…æ˜¯é¡¹ç›®è‡ªå»ºï¼Œè‡ªå»ºçš„æ–¹å¼å¯ä»¥æ˜¯ä»å¤šä¸ªå­æ¨¡å—ä¸­æŠ½å–commonçš„ç»„ä»¶ã€‚è€Œä¸ç”¨day1çš„æ—¶å€™å°±æ„å»ºã€‚
ä½†æ˜¯è¿™ä¸ªcomponent ui åº“æ˜¯éœ€è¦çš„ã€‚ </p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>æˆ‘éœ€è¦åœ¨é¡¹ç›®ä¸­è¿›ä¸€æ­¥å°è¯ä¸€ä¸‹ã€‚æ¯”å¦‚BRPå’ŒNew UI MFEçš„å…³ç³»</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="6-cross-application-communication">6. Cross-application communication<a class="hash-link" href="#6-cross-application-communication" title="Direct link to heading">â€‹</a></h2><p>One of the most common questions regarding micro frontends is <strong>how to let them talk to each other</strong>.
In general, we recommend having them communicate as little as possible,
as it often reintroduces the sort of inappropriate coupling that we&#x27;re seeking to avoid in the first place.</p><p>That said, some level of cross-app communication is often needed. </p><ul><li>Custom events allow micro frontends to communicate indirectly, which is a good way to minimise direct coupling,
though it does make it harder to determine and enforce the contract that exists between micro frontends. </li><li>Alternatively, the React model of passing callbacks and data downwards (in this case downwards from the container
application to the micro frontends) is also a good solution that makes the contract more explicit. </li><li>A third alternative is to use the address bar as a communication mechanism.</li></ul><p>Whatever approach we choose, we want our micro frontends to communicate by sending messages or events to each other,
and avoid having any shared state. </p><p>Just like sharing a database across microservices, as soon as we share our data structures and domain models,
we create massive amounts of coupling, and it becomes extremely difficult to make changes.</p><p>è¿™å—æˆ‘ç°åœ¨è¿˜ç†è§£ä¸åˆ°ä½ï¼Œéœ€è¦è¿›è¡Œä¸€äº›POCï¼Œä¹‹åä¼šå¦å¤–è¯¦ç»†å†™ä¸€ç¯‡blogã€‚</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/metaTrip/build/blog/tags/micro">micro</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/metaTrip/build/blog/tags/react">react</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/metaTrip/build/blog/tags/java-script">javaScript</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/metaTrip/build/blog/react1"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->useEffectï¼Œyou really know it?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/metaTrip/build/blog/funding-basic4"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">å¸¸è§è¡Œä¸šæŒ‡æ•°åŸºé‡‘<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-micro-frontends" class="table-of-contents__link toc-highlight">1. Micro Frontends</a><ul><li><a href="#1-1-mfe-cost" class="table-of-contents__link toc-highlight">1-1. MFE cost</a></li></ul></li><li><a href="#2-benefits" class="table-of-contents__link toc-highlight">2. Benefits</a><ul><li><a href="#2-1-incremental-upgradeså¢é‡å‡çº§" class="table-of-contents__link toc-highlight">2-1. Incremental upgrades(å¢é‡å‡çº§)</a></li><li><a href="#2-2-simple-decoupled-codebasesç®€å•è§£è€¦" class="table-of-contents__link toc-highlight">2-2. Simple, decoupled codebases(ç®€å•ï¼Œè§£è€¦)</a></li><li><a href="#2-3-independent-deploymentç‹¬ç«‹éƒ¨ç½²" class="table-of-contents__link toc-highlight">2-3. Independent deployment(ç‹¬ç«‹éƒ¨ç½²)</a></li><li><a href="#2-4-autonomous-teamsè‡ªæ²»å›¢é˜Ÿ" class="table-of-contents__link toc-highlight">2-4. Autonomous teams(è‡ªæ²»å›¢é˜Ÿ)</a></li></ul></li><li><a href="#3-integration-approaches" class="table-of-contents__link toc-highlight">3. Integration approaches</a><ul><li><a href="#3-1-server-side-template-composition" class="table-of-contents__link toc-highlight">3-1. Server-side template composition</a></li><li><a href="#3-2-build-time-integration" class="table-of-contents__link toc-highlight">3-2. Build-time integration</a></li><li><a href="#3-3-run-time-integration-via-iframes" class="table-of-contents__link toc-highlight">3-3. Run-time integration via iframes</a></li><li><a href="#3-4-run-time-integration-via-javascriptä¸»è¦å®ç°æ–¹å¼" class="table-of-contents__link toc-highlight">3-4. Run-time integration via JavaScript(ä¸»è¦å®ç°æ–¹å¼)</a></li><li><a href="#3-5-run-time-integration-via-web-components" class="table-of-contents__link toc-highlight">3-5. Run-time integration via Web Components</a></li></ul></li><li><a href="#4-styling" class="table-of-contents__link toc-highlight">4. Styling</a></li><li><a href="#5-shared-component-libraries" class="table-of-contents__link toc-highlight">5. Shared component libraries</a></li><li><a href="#6-cross-application-communication" class="table-of-contents__link toc-highlight">6. Cross-application communication</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/metaTrip/build/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/metaTrip/build/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/metaTrip/build/assets/js/runtime~main.1a16aeb3.js"></script>
<script src="/metaTrip/build/assets/js/main.e52117e5.js"></script>
</body>
</html>